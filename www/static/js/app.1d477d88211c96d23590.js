webpackJsonp([1],{"7Otq":function(t,e,n){t.exports=n.p+"static/img/logo.e5ca58d.png"},CgrX:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("Xrl+"),n("fLmE"),n("rplX");var r,i=n("//Fk"),s=n.n(i),a=n("BO1k"),o=n.n(a),l=n("Xxa5"),c=n.n(l),u=n("exGp"),p=n.n(u),v=(r=p()(c.a.mark(function t(e){var n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if(200==(n=t.sent).status){t.next=5;break}throw new Error(e+" responses "+n.status);case 5:return r=document.createElement("html"),t.next=8,n.text();case 8:return r.innerHTML=t.sent,t.abrupt("return",r);case 10:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)});window.scraper={transable:function(t){return t.startsWith("http://www.hnyanling.gov.cn")},fetchNewsList:function(){var t,e,n,r,i=[];return s.a.all([(t=p()(c.a.mark(function t(e){var n,r,s,a,l,u,p;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:for(n=t.sent,r=!0,s=!1,a=void 0,t.prev=6,l=o()(n.querySelector("div.c > ul").children);!(r=(u=l.next()).done);r=!0)p=u.value,i.push({url:p.getAttribute("href"),title:p.querySelector("i").textContent,date:p.querySelector("em").textContent,source:"hnyanling"});t.next=14;break;case 10:t.prev=10,t.t0=t.catch(6),s=!0,a=t.t0;case 14:t.prev=14,t.prev=15,!r&&l.return&&l.return();case 17:if(t.prev=17,!s){t.next=20;break}throw a;case 20:return t.finish(17);case 21:return t.finish(14);case 22:case"end":return t.stop()}},t,this,[[6,10,14,22],[15,,17,21]])})),n=function(e){return t.apply(this,arguments)},e=p()(c.a.mark(function t(e){var n,r,s,a,l,u,p;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:for(n=t.sent,r=!0,s=!1,a=void 0,t.prev=6,l=o()(n.querySelector("div.video-c > ul").children);!(r=(u=l.next()).done);r=!0)p=u.value,i.push({url:p.getAttribute("href"),title:p.querySelector("i").textContent,date:p.querySelector("em").textContent,thumbnail:"http://www.hnyanling.gov.cn"+p.querySelector("img").getAttribute("src"),source:"hnyanling"});t.next=14;break;case 10:t.prev=10,t.t0=t.catch(6),s=!0,a=t.t0;case 14:t.prev=14,t.prev=15,!r&&l.return&&l.return();case 17:if(t.prev=17,!s){t.next=20;break}throw a;case 20:return t.finish(17);case 21:return t.finish(14);case 22:case"end":return t.stop()}},t,this,[[6,10,14,22],[15,,17,21]])})),r=function(t){return e.apply(this,arguments)},s.a.all([n("http://www.hnyanling.gov.cn/c53/index.html"),n("http://www.hnyanling.gov.cn/c56/index.html"),n("http://www.hnyanling.gov.cn/c57/index.html"),n("http://www.hnyanling.gov.cn/c58/index.html"),r("http://www.hnyanling.gov.cn/c539/index.html")]))]).then(function(t){return i})},fetchNewsDetail:function(t){var e,n=(e=p()(c.a.mark(function t(e){var n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:return n=t.sent,r=n.querySelector("div.b").children,t.abrupt("return",{title:r[0].textContent,info:r[1].children[0].textContent.trim(),time:r[1].children[1].textContent.split(/[:：]/).slice(1).join(":").trim(),video:[].map.call(r[2].querySelectorAll("video"),function(t){return"http://www.hnyanling.gov.cn"+t.getAttribute("src")}),image:[].map.call(r[2].querySelectorAll("img"),function(t){return"http://www.hnyanling.gov.cn"+t.getAttribute("src")}),text:[].map.call(r[2].querySelectorAll("p"),function(t){return t.textContent.trim()}).filter(function(t){return t.length>1}).slice(0,-1)});case 5:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)});switch(!1){case!t.startsWith("http://www.hnyanling.gov.cn"):return n(t);default:return null}}};var h=n("7+uW"),d=n("EOUi"),f=n.n(d),w=n("Dd8w"),m=n.n(w),g={data:function(){return{msg:"炎陵新闻",pullState:"initial",news:[]}},methods:{update_news:function(t){var e=this;scraper.fetchNewsList().then(function(t){e.news=t}).then(t).catch(t)}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-toolbar-button",{on:{click:function(e){t.$emit("toggleSetting")}}},[n("v-ons-icon",{attrs:{icon:"ion-navicon, material:md-menu"}})],1)],1),t._v(" "),n("div",{staticClass:"center"},[t._v(t._s(t.msg))])]),t._v(" "),n("v-ons-pull-hook",{attrs:{action:t.update_news},on:{changestate:function(e){t.pullState=e.state}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:"initial"===t.pullState,expression:"pullState === 'initial'"}]},[t._v(" 下拉刷新 ")]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"preaction"===t.pullState,expression:"pullState === 'preaction'"}]},[t._v(" 松开刷新 ")]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"action"===t.pullState,expression:"pullState === 'action'"}]},[t._v(" 加载中... ")])]),t._v(" "),n("v-ons-list",t._l(t.news,function(e){return n("v-ons-list-item",{key:e.url,attrs:{modifier:"chevron",tappable:""},on:{click:function(n){t.$emit("open-news",e)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.thumbnail,expression:"item.thumbnail != null"}],staticClass:"left"},[n("img",{staticClass:"list-item__thumbnail",attrs:{src:e.thumbnail}})]),t._v(" "),n("div",{staticClass:"center"},[n("span",{staticClass:"list-item__title"},[t._v(" "+t._s(e.title)+" ")]),t._v(" "),n("span",{staticClass:"list-item__subtitle"},[t._v(" "+t._s(e.date)+" ")])])])}))],1)},staticRenderFns:[]},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-ons-page",[e("v-ons-toolbar",{attrs:{modifier:"transparent"}}),this._v(" "),e("div",{staticClass:"header"},[e("img",{attrs:{src:n("7Otq")}})])],1)},staticRenderFns:[]};var b={data:function(){return{sideMenuOpen:!1}},components:{NewsList:n("VU/8")(g,_,!1,null,null,null).exports,SettingMenu:n("VU/8")({data:function(){return{}}},x,!1,function(t){n("QpgM")},"data-v-3264cf37",null).exports}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-splitter",[n("v-ons-splitter-side",{attrs:{swipeable:"",collapse:"",width:"250px",open:t.sideMenuOpen},on:{"update:open":function(e){t.sideMenuOpen=e}}},[n("setting-menu")],1),t._v(" "),n("v-ons-splitter-content",[n("news-list",{on:{"toggle-setting":function(e){t.sideMenuOpen=!t.sideMenuOpen},"open-news":function(e){t.$emit("open-news",e)}}})],1)],1)],1)},staticRenderFns:[]},k=n("VU/8")(b,y,!1,null,null,null).exports,S={props:["news"],data:function(){return{detail:{}}},computed:{info:function(){var t=[];return this.detail.info&&t.push(this.detail.info),this.detail.time?t.push(this.detail.time):this.detail.date?t.push(this.detail.date):t.push(this.news.date),t.join(" ")}},created:function(){var t=this;scraper.fetchNewsDetail(this.news.url).then(function(e){return t.detail=e})}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-back-button",[t._v("返回")])],1),t._v(" "),n("div",{staticClass:"center"},[t._v(t._s(t.detail.title||t.news.title||"加载中..."))])]),t._v(" "),n("article",[n("h1",{directives:[{name:"show",rawName:"v-show",value:t.detail.title||t.news.title,expression:"detail.title || news.title"}]},[t._v(" "+t._s(t.detail.title||t.news.title)+" ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.info,expression:"info"}]},[t._v(" "+t._s(t.info)+" ")]),t._v(" "),t._l(t.detail.video,function(t){return n("video",{key:t,attrs:{src:t,controls:""}})}),t._v(" "),t._l(t.detail.image,function(t){return n("p",{key:t},[n("img",{attrs:{src:t}})])}),t._v(" "),t._l(t.detail.text,function(e){return n("p",{key:e},[t._v(" "+t._s(e)+" ")])})],2)],1)},staticRenderFns:[]};var N=n("VU/8")(S,C,!1,function(t){n("CgrX")},"data-v-2615d9fe",null).exports;console.log(k);var q={data:function(){return{pageStack:[k]}},methods:{openNews:function(t){if(!scraper.transable(t.url))return window.open(t.url,"_blank");this.pageStack.push(m()({},N,{onsNavigatorProps:{news:t}}))}}},E={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-ons-navigator",{attrs:{swipeable:"","page-stack":t.pageStack},on:{"open-news":function(e){t.openNews(e)}}})},staticRenderFns:[]},M=n("VU/8")(q,E,!1,null,null,null).exports;h.a.config.productionTip=!1,h.a.use(f.a),new h.a({el:"#app",template:"<YLnews/>",components:{YLnews:M}})},QpgM:function(t,e){},"Xrl+":function(t,e){},fLmE:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1d477d88211c96d23590.js.map